FROM ubuntu:18.04

MAINTAINER Brian Masney <masneyb@onstation.org>

ENV TZ=America/New_York

RUN export DEBIAN_FRONTEND=noninteractive && \
    apt-get update && \
    apt-get -y install cron tzdata && \
    ln -snf /usr/share/zoneinfo/${TZ} /etc/localtime && \
    echo ${TZ} > /etc/timezone

VOLUME ["/var/run/cavedb-worker"]

COPY conf/crontab /etc/crontab.template

COPY cavedb/scripts/docker-cron-entrypoint.sh /docker-cron-entrypoint.sh

ENTRYPOINT ["/docker-cron-entrypoint.sh"]
